!function($){$.extend({tablesorter:new function(){function benchmark(s,d){log(s+","+((new Date).getTime()-d.getTime())+"ms")}function log(s){"undefined"!=typeof console&&"undefined"!=typeof console.debug?console.log(s):alert(s)}function buildParserCache(table,$headers){if(table.config.debug)var parsersDebug="";var rows=table.tBodies[0].rows;if(table.tBodies[0].rows[0])for(var list=[],cells=rows[0].cells,l=cells.length,i=0;l>i;i++){var p=!1;$.metadata&&$($headers[i]).metadata()&&$($headers[i]).metadata().sorter?p=getParserById($($headers[i]).metadata().sorter):table.config.headers[i]&&table.config.headers[i].sorter&&(p=getParserById(table.config.headers[i].sorter)),p||(p=detectParserForColumn(table,cells[i])),table.config.debug&&(parsersDebug+="column:"+i+" parser:"+p.id+"\n"),list.push(p)}return table.config.debug&&log(parsersDebug),list}function detectParserForColumn(table,node){for(var l=parsers.length,i=1;l>i;i++)if(parsers[i].is($.trim(getElementText(table.config,node)),table,node))return parsers[i];return parsers[0]}function getParserById(name){for(var l=parsers.length,i=0;l>i;i++)if(parsers[i].id.toLowerCase()==name.toLowerCase())return parsers[i];return!1}function buildCache(table){if(table.config.debug)var cacheTime=new Date;for(var totalRows=table.tBodies[0]&&table.tBodies[0].rows.length||0,totalCells=table.tBodies[0].rows[0]&&table.tBodies[0].rows[0].cells.length||0,parsers=table.config.parsers,cache={row:[],normalized:[]},i=0;totalRows>i;++i){var c=table.tBodies[0].rows[i],cols=[];cache.row.push($(c));for(var j=0;totalCells>j;++j)cols.push(parsers[j].format(getElementText(table.config,c.cells[j]),table,c.cells[j]));cols.push(i),cache.normalized.push(cols),cols=null}return table.config.debug&&benchmark("Building cache for "+totalRows+" rows:",cacheTime),cache}function getElementText(config,node){if(!node)return"";var t="";return t="simple"==config.textExtraction?node.childNodes[0]&&node.childNodes[0].hasChildNodes()?node.childNodes[0].innerHTML:node.innerHTML:"function"==typeof config.textExtraction?config.textExtraction(node):$(node).text()}function appendToTable(table,cache){if(table.config.debug)var appendTime=new Date;for(var c=cache,r=c.row,n=c.normalized,totalRows=n.length,checkCell=n[0].length-1,tableBody=$(table.tBodies[0]),rows=[],i=0;totalRows>i;i++)if(rows.push(r[n[i][checkCell]]),!table.config.appender)for(var o=r[n[i][checkCell]],l=o.length,j=0;l>j;j++)tableBody[0].appendChild(o[j]);table.config.appender&&table.config.appender(table,rows),rows=null,table.config.debug&&benchmark("Rebuilt table:",appendTime),applyWidget(table),setTimeout(function(){$(table).trigger("sortEnd")},0)}function buildHeaders(table){if(table.config.debug)var time=new Date;for(var tableHeadersRows=(!!$.metadata,[]),i=0;i<table.tHead.rows.length;i++)tableHeadersRows[i]=0;return $tableHeaders=$("thead th",table),$tableHeaders.each(function(index){this.count=0,this.column=index,this.order=formatSortingOrder(table.config.sortInitialOrder),(checkHeaderMetadata(this)||checkHeaderOptions(table,index))&&(this.sortDisabled=!0),this.sortDisabled||$(this).addClass(table.config.cssHeader),table.config.headerList[index]=this}),table.config.debug&&(benchmark("Built headers:",time),log($tableHeaders)),$tableHeaders}function checkCellColSpan(table,rows,row){for(var arr=[],r=table.tHead.rows,c=r[row].cells,i=0;i<c.length;i++){var cell=c[i];cell.colSpan>1?arr=arr.concat(checkCellColSpan(table,headerArr,row++)):(1==table.tHead.length||cell.rowSpan>1||!r[row+1])&&arr.push(cell)}return arr}function checkHeaderMetadata(cell){return!(!$.metadata||$(cell).metadata().sorter!==!1)}function checkHeaderOptions(table,i){return!(!table.config.headers[i]||table.config.headers[i].sorter!==!1)}function applyWidget(table){for(var c=table.config.widgets,l=c.length,i=0;l>i;i++)getWidgetById(c[i]).format(table)}function getWidgetById(name){for(var l=widgets.length,i=0;l>i;i++)if(widgets[i].id.toLowerCase()==name.toLowerCase())return widgets[i]}function formatSortingOrder(v){return"Number"!=typeof v?i="desc"==v.toLowerCase()?1:0:i=1==v?v:0,i}function isValueInArray(v,a){for(var l=a.length,i=0;l>i;i++)if(a[i][0]==v)return!0;return!1}function setHeadersCss(table,$headers,list,css){$headers.removeClass(css[0]).removeClass(css[1]);var h=[];$headers.each(function(offset){this.sortDisabled||(h[this.column]=$(this))});for(var l=list.length,i=0;l>i;i++)h[list[i][0]].addClass(css[list[i][1]])}function fixColumnWidth(table,$headers){var c=table.config;if(c.widthFixed){var colgroup=$("<colgroup>");$("tr:first td",table.tBodies[0]).each(function(){colgroup.append($("<col>").css("width",$(this).width()))}),$(table).prepend(colgroup)}}function updateHeaderSortCount(table,sortList){for(var c=table.config,l=sortList.length,i=0;l>i;i++){var s=sortList[i],o=c.headerList[s[0]];o.count=s[1],o.count++}}function multisort(table,sortList,cache){if(table.config.debug)var sortTime=new Date;for(var dynamicExp="var sortWrapper = function(a,b) {",l=sortList.length,i=0;l>i;i++){var c=sortList[i][0],order=sortList[i][1],s="text"==getCachedSortType(table.config.parsers,c)?0==order?"sortText":"sortTextDesc":0==order?"sortNumeric":"sortNumericDesc",e="e"+i;dynamicExp+="var "+e+" = "+s+"(a["+c+"],b["+c+"]); ",dynamicExp+="if("+e+") { return "+e+"; } ",dynamicExp+="else { "}var orgOrderCol=cache.normalized[0].length-1;dynamicExp+="return a["+orgOrderCol+"]-b["+orgOrderCol+"];";for(var i=0;l>i;i++)dynamicExp+="}; ";return dynamicExp+="return 0; ",dynamicExp+="}; ",eval(dynamicExp),cache.normalized.sort(sortWrapper),table.config.debug&&benchmark("Sorting on "+sortList.toString()+" and dir "+order+" time:",sortTime),cache}function sortText(a,b){return b>a?-1:a>b?1:0}function sortTextDesc(a,b){return a>b?-1:b>a?1:0}function sortNumeric(a,b){return a-b}function sortNumericDesc(a,b){return b-a}function getCachedSortType(parsers,i){return parsers[i].type}var parsers=[],widgets=[];this.defaults={cssHeader:"header",cssAsc:"headerSortUp",cssDesc:"headerSortDown",sortInitialOrder:"asc",sortMultiSortKey:"shiftKey",sortForce:null,sortAppend:null,textExtraction:"simple",parsers:{},widgets:[],widgetZebra:{css:["even","odd"]},headers:{},widthFixed:!1,cancelSelection:!0,sortList:[],headerList:[],dateFormat:"us",decimal:".",debug:!1},this.benchmark=benchmark,this.construct=function(settings){return this.each(function(){if(this.tHead&&this.tBodies){var $this,$headers,cache,config;this.config={},config=$.extend(this.config,$.tablesorter.defaults,settings),$this=$(this),$headers=buildHeaders(this),this.config.parsers=buildParserCache(this,$headers),cache=buildCache(this);var sortCSS=[config.cssDesc,config.cssAsc];fixColumnWidth(this),$headers.click(function(e){$this.trigger("sortStart");var totalRows=$this[0].tBodies[0]&&$this[0].tBodies[0].rows.length||0;if(!this.sortDisabled&&totalRows>0){var i=($(this),this.column);if(this.order=this.count++%2,e[config.sortMultiSortKey])if(isValueInArray(i,config.sortList))for(var j=0;j<config.sortList.length;j++){var s=config.sortList[j],o=config.headerList[s[0]];s[0]==i&&(o.count=s[1],o.count++,s[1]=o.count%2)}else config.sortList.push([i,this.order]);else{if(config.sortList=[],null!=config.sortForce)for(var a=config.sortForce,j=0;j<a.length;j++)a[j][0]!=i&&config.sortList.push(a[j]);config.sortList.push([i,this.order])}return setTimeout(function(){setHeadersCss($this[0],$headers,config.sortList,sortCSS),appendToTable($this[0],multisort($this[0],config.sortList,cache))},1),!1}}).mousedown(function(){return config.cancelSelection?(this.onselectstart=function(){return!1},!1):void 0}),$this.bind("update",function(){this.config.parsers=buildParserCache(this,$headers),cache=buildCache(this)}).bind("sorton",function(e,list){$(this).trigger("sortStart"),config.sortList=list;var sortList=config.sortList;updateHeaderSortCount(this,sortList),setHeadersCss(this,$headers,sortList,sortCSS),appendToTable(this,multisort(this,sortList,cache))}).bind("appendCache",function(){appendToTable(this,cache)}).bind("applyWidgetId",function(e,id){getWidgetById(id).format(this)}).bind("applyWidgets",function(){applyWidget(this)}),$.metadata&&$(this).metadata()&&$(this).metadata().sortlist&&(config.sortList=$(this).metadata().sortlist),config.sortList.length>0&&$this.trigger("sorton",[config.sortList]),applyWidget(this)}})},this.addParser=function(parser){for(var l=parsers.length,a=!0,i=0;l>i;i++)parsers[i].id.toLowerCase()==parser.id.toLowerCase()&&(a=!1);a&&parsers.push(parser)},this.addWidget=function(widget){widgets.push(widget)},this.formatFloat=function(s){var i=parseFloat(s);return isNaN(i)?0:i},this.formatInt=function(s){var i=parseInt(s);return isNaN(i)?0:i},this.isDigit=function(s,config){var DECIMAL="\\"+config.decimal,exp="/(^[+]?0("+DECIMAL+"0+)?$)|(^([-+]?[1-9][0-9]*)$)|(^([-+]?((0?|[1-9][0-9]*)"+DECIMAL+"(0*[1-9][0-9]*)))$)|(^[-+]?[1-9]+[0-9]*"+DECIMAL+"0+$)/";return RegExp(exp).test($.trim(s))},this.clearTableBody=function(table){function empty(){for(;this.firstChild;)this.removeChild(this.firstChild)}$.browser.msie?empty.apply(table.tBodies[0]):table.tBodies[0].innerHTML=""}}}),$.fn.extend({tablesorter:$.tablesorter.construct});var ts=$.tablesorter;ts.addParser({id:"text",is:function(s){return!0},format:function(s){return $.trim(s.toLowerCase())},type:"text"}),ts.addParser({id:"digit",is:function(s,table){var c=table.config;return $.tablesorter.isDigit(s,c)},format:function(s){return $.tablesorter.formatFloat(s)},type:"numeric"}),ts.addParser({id:"currency",is:function(s){return/^[£$€?.]/.test(s)},format:function(s){return $.tablesorter.formatFloat(s.replace(new RegExp(/[^0-9.]/g),""))},type:"numeric"}),ts.addParser({id:"ipAddress",is:function(s){return/^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(s)},format:function(s){for(var a=s.split("."),r="",l=a.length,i=0;l>i;i++){var item=a[i];r+=2==item.length?"0"+item:item}return $.tablesorter.formatFloat(r)},type:"numeric"}),ts.addParser({id:"url",is:function(s){return/^(https?|ftp|file):\/\/$/.test(s)},format:function(s){return jQuery.trim(s.replace(new RegExp(/(https?|ftp|file):\/\//),""))},type:"text"}),ts.addParser({id:"isoDate",is:function(s){return/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(s)},format:function(s){return $.tablesorter.formatFloat(""!=s?new Date(s.replace(new RegExp(/-/g),"/")).getTime():"0")},type:"numeric"}),ts.addParser({id:"percent",is:function(s){return/\%$/.test($.trim(s))},format:function(s){return $.tablesorter.formatFloat(s.replace(new RegExp(/%/g),""))},type:"numeric"}),ts.addParser({id:"usLongDate",is:function(s){return s.match(new RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/))},format:function(s){return $.tablesorter.formatFloat(new Date(s).getTime())},type:"numeric"}),ts.addParser({id:"shortDate",is:function(s){return/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(s)},format:function(s,table){var c=table.config;return s=s.replace(/\-/g,"/"),"us"==c.dateFormat?s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$1/$2"):"uk"==c.dateFormat?s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1"):"dd/mm/yy"!=c.dateFormat&&"dd-mm-yy"!=c.dateFormat||(s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3")),$.tablesorter.formatFloat(new Date(s).getTime())},type:"numeric"}),ts.addParser({id:"time",is:function(s){return/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(s)},format:function(s){return $.tablesorter.formatFloat(new Date("2000/01/01 "+s).getTime())},type:"numeric"}),ts.addParser({id:"metadata",is:function(s){return!1},format:function(s,table,cell){var c=table.config,p=c.parserMetadataName?c.parserMetadataName:"sortValue";return $(cell).metadata()[p]},type:"numeric"}),ts.addWidget({id:"zebra",format:function(table){if(table.config.debug)var time=new Date;$("tr:visible",table.tBodies[0]).filter(":even").removeClass(table.config.widgetZebra.css[1]).addClass(table.config.widgetZebra.css[0]).end().filter(":odd").removeClass(table.config.widgetZebra.css[0]).addClass(table.config.widgetZebra.css[1]),table.config.debug&&$.tablesorter.benchmark("Applying Zebra widget",time)}})}(jQuery);